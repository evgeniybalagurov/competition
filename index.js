(()=>{"use strict";var e="l6r7lzQX38ULq1n292LLpWHwUU4iNOWC",t={baseUrl:"https://api.giphy.com/v1/gifs/",uploadUrl:"http://upload.giphy.com/v1/gifs",searchUrl:"search",trendingUrl:"trending",randomUrl:"random",apiKey:"?api_key=".concat(e),apiKeyAdd:e,limit:"&limit=20",query:"&q="},n=document.querySelector('input[type="search"]'),r=document.querySelector(".search__button"),i=document.querySelector(".feed__grid"),o=document.querySelector(".trends__grid"),a=document.querySelector(".random__wrapper"),l=document.querySelector("#grid-template").content.querySelector(".grid"),s={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._uploadUrl=t.uploadUrl,this._searchUrl=t.searchUrl,this._trendingUrl=t.trendingUrl,this._randomUrl=t.randomUrl,this._apiKey=t.apiKey,this._apiKeyAdd=t.apiKeyAdd,this._limit=t.limit,this._query=t.query}var t,n;return t=e,(n=[{key:"searchGifs",value:function(e){return fetch(this._baseUrl+this._searchUrl+this._apiKey+this._limit+this._query+e).then((function(e){if(e)return e.json()})).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getTrendingGifs",value:function(){return fetch(this._baseUrl+this._trendingUrl+this._apiKey+this._limit).then((function(e){if(e)return e.json()})).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getRandomGif",value:function(){return fetch(this._baseUrl+this._randomUrl+this._apiKey).then((function(e){if(e)return e.json()})).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"addGif",value:function(e){return e.append("api_key",this._apiKeyAdd),fetch(this._uploadUrl,{method:"POST",body:e}).then(this._getResposeData)}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.message))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"renderItem",value:function(e){this._renderer(e)}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"resetContainer",value:function(){this._container.innerHTML=""}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){var r=t.images,i=t.title;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=r.downsized_medium.url,this._name=i,this._element=n.cloneNode(!0),this._image=this._element.querySelector(".grid__image")}var t,n;return t=e,(n=[{key:"generateCard",value:function(){return this._image.src=this._url,this._image.alt=this._name,this._element}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){var n=t.images,r=t.title;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n.downsized_medium.url,this._name=r,this._image=document.querySelector(".random__image")}var t,n;return t=e,(n=[{key:"generateItem",value:function(){return this._image.src=this._url,this._image.alt=this._name,this._image}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._linkElements=document.querySelectorAll(t.linkSelector),this._contentElements=document.querySelectorAll(t.contentSelector),this._buttonElement=document.querySelector(t.buttonAddSelector),this._linkActiveClass=t.linkActiveClass,this._contentShowClass=t.contentShowClass,this._handleElementClick=n}var t,n;return t=e,(n=[{key:"_addClass",value:function(e,t){e.classList.add(t)}},{key:"_removeClass",value:function(e,t){e.forEach((function(e){return e.classList.remove(t)}))}},{key:"_removeActiveClass",value:function(){this._removeClass(this._linkElements,this._linkActiveClass),this._removeClass(this._contentElements,this._contentShowClass)}},{key:"setEventListener",value:function(){var e=this;this._linkElements.forEach((function(t,n){return t.addEventListener("click",(function(){e._removeActiveClass(),e._addClass(e._linkElements[n],e._linkActiveClass),e._addClass(e._contentElements[n],e._contentShowClass),e._handleElementClick(n)}))})),this._buttonElement&&this._buttonElement.addEventListener("click",(function(){e._removeActiveClass(),e._addClass(e._contentElements[e._contentElements.length-1],e._contentShowClass),e._handleElementClick(e._contentElements.length-1)}))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const b=y;function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=document.querySelector(t.formSelector),this._fileUploadElement=this._formElement.querySelector(t.fileUploadSelector),this._textContainerUploadElement=this._fileUploadElement.querySelector(t.textContainerUploadSelector),this._buttonResetUploadElement=this._fileUploadElement.querySelector(t.buttonResetUploadSelector),this._inputUploadElement=this._fileUploadElement.querySelector(t.inputUploadSelector),this._inputList=this._formElement.querySelectorAll(t.inputListSelector),this._buttonElement=this._formElement.querySelector(t.buttonSelector),this._inactiveButtonClass=t.inactiveButtonClass,this._handleFormSubmit=n}var t,n;return t=e,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formData=new FormData,this._inputList.forEach((function(t){"file"===t.type?e._formData.append(t.name,t.files[0]):e._formData.append(t.name,t.value)})),this._formData}},{key:"_setInactiveButton",value:function(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}},{key:"setLoading",value:function(e){e?(this._buttonElement.textContent="Sending...",this._setInactiveButton()):(this._buttonElement.textContent="Send",this._formElement.reset(),this._textContainerUploadElement.textContent="Select a file")}},{key:"setEventListener",value:function(){var e=this;this._fileUploadElement.addEventListener("change",(function(t){var n=t.target.value.split("\\").pop();e._textContainerUploadElement.textContent=n||"Select a file"})),this._buttonResetUploadElement.addEventListener("click",(function(t){e._textContainerUploadElement.textContent="Select a file",e._inputUploadElement.value="",e._setInactiveButton()})),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._formElement=n,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=this._formElement.querySelectorAll(this._inputSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=document.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=document.querySelector(".".concat(e.id,"-error"));t.textContent="",e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass)}},{key:"_toggleButtonState",value:function(){this._buttonElement.disabled=!this._formElement.checkValidity(),this._buttonElement.classList.toggle(this._inactiveButtonClass,!this._formElement.checkValidity())}},{key:"_handleFormInput",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e),this._toggleButtonState()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){return e._handleFormInput(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this._toggleButtonState()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const k=S;function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const U=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buttonElement=t,this._inputElement=n,this._handleElementClick=r}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._buttonElement.addEventListener("click",(function(){e._handleElementClick()})),this._inputElement.addEventListener("keydown",(function(t){"Enter"===t.key&&(t.preventDefault(),e._handleElementClick())}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var L=new u(t),q=new g({formSelector:".form",fileUploadSelector:".upload",textContainerUploadSelector:".upload__text",buttonResetUploadSelector:".upload__button-reset",inputUploadSelector:".upload__input",inputListSelector:".form__input",buttonSelector:".form__button",inactiveButtonClass:"form__button_disabled"},(function(e){q.setLoading(!0),L.addGif(e).catch((function(e){console.log("Error: ".concat(e)),alert("Error: ".concat(e))})).finally((function(){q.setLoading(!1)}))}));q.setEventListener();var I,j={};function A(e){return new d(e,l).generateCard()}I=s,Array.from(document.querySelectorAll(I.formSelector)).forEach((function(e){var t=new k(s,e),n=e.getAttribute("name");j[n]=t,t.enableValidation()}));var B=new h({renderer:function(e){var t=A(e);B.addItem(t)}},i),O=new h({renderer:function(e){var t=A(e);O.addItem(t)}},o),P=new h({renderer:function(e){var t=function(e){return new p(e).generateItem()}(e);P.addItem(t)}},a);new b({linkSelector:".menu__link",contentSelector:".content__pane",buttonAddSelector:".menu__add-btn",linkActiveClass:"menu__link_active",contentShowClass:"content__pane_show"},(function(e){switch(++e){case 2:L.getTrendingGifs().then((function(e){O.resetContainer(),O.renderItems(e)})).catch((function(e){console.log(e),alert("Error: ".concat(e))}));break;case 3:L.getRandomGif().then((function(e){P.renderItem(e)})).catch((function(e){console.log(e),alert("Error: ".concat(e))}))}})).setEventListener(),new U(r,n,(function(){B.resetContainer(),L.searchGifs(n.value).then((function(e){return B.renderItems(e)})).catch((function(e){console.log(e),alert("Error: ".concat(e))}))})).setEventListeners()})();
//# sourceMappingURL=index.js.map